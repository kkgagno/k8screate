- name: Create mount  directory if it does not exist
  ansible.builtin.file:
    path: /mnt/data
    state: directory
    mode: '0755'

- name: Create fpga  directory if it does not exist
  ansible.builtin.file:
    path: /home/illumina/fpga
    state: directory
    mode: '0755'

- name: Mount the  NFS volume
  ansible.posix.mount:
    src: 172.16.16.115:/data/nfs
    path: /mnt/data
    opts: rw,sync,hard
    state: mounted
    fstype: nfs

- name: Copy fpga files from nfs mount to local
  copy:
     src: /mnt/data/fpga/
     dest: /home/illumina/fpga
     remote_src: yes

- name: Unmount nfs share
  ansible.posix.mount:
    path: /mnt/data
    state: unmounted